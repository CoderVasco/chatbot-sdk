document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("chatbot-container");if(!e)return void console.error('Chatbot container not found. Please add <div id="chatbot-container"></div> to your HTML.');const t=document.createElement("link");t.href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&family=Orbitron:wght@700&display=swap",t.rel="stylesheet",document.head.appendChild(t);const n=document.createElement("style");n.textContent="\n        .glassmorphism { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); }\n        .neon-glow { box-shadow: 0 0 10px rgba(219, 39, 119, 0.8), 0 0 20px rgba(219, 39, 119, 0.4); }\n        .hover-scale { transition: transform 0.3s ease; }\n        .hover-scale:hover { transform: scale(1.05); }\n        .chatbot-message { max-width: 80%; word-break: break-word; }\n        .chatbot-message.bot { background: #4b5563; }\n        .chatbot-message.user { background: #db2777; margin-left: auto; }\n        .chatbot-typing { max-width: 80%; background: #4b5563; color: #ffffff; padding: 8px 12px; border-radius: 12px; font-size: 0.875rem; display: flex; align-items: center; }\n        .chatbot-typing::before { content: ''; display: inline-block; width: 6px; height: 6px; background: #ffffff; border-radius: 50%; margin-right: 4px; animation: typing-dot 1.5s infinite; }\n        .chatbot-typing::after { content: ''; display: inline-block; width: 6px; height: 6px; background: #ffffff; border-radius: 50%; margin-left: 4px; animation: typing-dot 1.5s infinite 0.3s; }\n        #chatbot-messages::-webkit-scrollbar { width: 6px; }\n        #chatbot-messages::-webkit-scrollbar-track { background: #1f2937; }\n        #chatbot-messages::-webkit-scrollbar-thumb { background: #db2777; border-radius: 3px; }\n        body { font-family: 'Poppins', sans-serif; }\n        h3 { font-family: 'Orbitron', sans-serif; }\n        .powered-by { font-size: 0.75rem; color: #d1d5db; }\n        .powered-by a { color: #db2777; text-decoration: underline; }\n        .powered-by a:hover { color: #f472b6; }\n        @media (max-width: 320px) {\n            #chatbot { bottom: 1rem; right: 1rem; }\n            #chatbot-toggle { padding: 0.75rem; }\n            #chatbot-window { width: 80vw; height: 350px; }\n            #chatbot-messages { padding: 0.5rem; }\n            .chatbot-message, .chatbot-typing { padding: 0.5rem; font-size: 0.75rem; }\n            #chatbot-form input, #chatbot-form button { padding: 0.5rem; }\n            #chatbot-form svg { width: 0.875rem; height: 0.875rem; }\n            .powered-by { font-size: 0.625rem; }\n        }\n        @keyframes typing-dot {\n            0%, 20% { opacity: 1; }\n            40%, 100% { opacity: 0.3; }\n        }\n        @keyframes ripple {\n            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }\n            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }\n        }\n    ",document.head.appendChild(n),e.innerHTML='\n        <div id="chatbot" class="fixed bottom-4 right-4 z-50">\n            <button id="chatbot-toggle" class="bg-pink-500 text-white p-3 rounded-full neon-glow hover-scale" aria-label="Abrir chat">\n                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5v-2a2 2 0 012-2h10a2 2 0 012 2v2h-4m-6 0h.01M12 16h.01" />\n                </svg>\n            </button>\n            <div id="chatbot-window" class="hidden glassmorphism w-[90vw] max-w-[360px] h-[400px] sm:h-[500px] rounded-3xl shadow-2xl flex flex-col transform translate-x-full transition-transform duration-300">\n                <div class="bg-gray-900 p-3 sm:p-4 rounded-t-3xl flex flex-col">\n                    <div class="flex justify-between items-center">\n                        <h3 class="text-base sm:text-lg font-bold text-white">ChatBot AI</h3>\n                        <button id="chatbot-close" class="text-gray-300 hover:text-pink-500" aria-label="Fechar chat">\n                            <svg class="w-5 h-5 sm:w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />\n                            </svg>\n                        </button>\n                    </div>\n                    <p class="powered-by mt-1">Powered by: <a href="https://tecnideia.ao" target="_blank">Tecnideia</a></p>\n                </div>\n                <div id="chatbot-messages" class="flex-1 p-3 sm:p-4 overflow-y-auto bg-gray-800/50"></div>\n                <div class="p-3 sm:p-4 border-t border-gray-700">\n                    <form id="chatbot-form" class="flex items-center space-x-2">\n                        <label for="chatbot-file" class="cursor-pointer">\n                            <svg class="w-5 h-5 text-pink-500 hover:text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 002.828 2.828L18 9.828V15m0 0H9m6-8V3H3v18h18V7h-6z" />\n                            </svg>\n                            <input type="file" id="chatbot-file" class="hidden" accept=".pdf,.png,.jpg,.jpeg" />\n                        </label>\n                        <input type="text" id="chatbot-input" class="flex-1 p-2 bg-gray-800 rounded-full text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="Digite sua mensagem..." />\n                        <button type="submit" class="bg-pink-500 text-white p-2 rounded-full hover:bg-pink-600" aria-label="Enviar mensagem">\n                            <svg class="w-4 h-4 sm:w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-18" />\n                            </svg>\n                        </button>\n                    </form>\n                    <p id="file-error" class="text-red-400 text-xs sm:text-sm mt-1 hidden"></p>\n                </div>\n            </div>\n        </div>\n    ';const o=document.getElementById("chatbot-toggle"),s=document.getElementById("chatbot-close"),a=document.getElementById("chatbot-window"),i=document.getElementById("chatbot-form"),r=document.getElementById("chatbot-input"),l=document.getElementById("chatbot-file"),d=document.getElementById("chatbot-messages"),c=document.getElementById("file-error");let m=sessionStorage.getItem("chatbotWelcomed");o.addEventListener("click",(()=>{a.classList.toggle("hidden"),a.classList.toggle("translate-x-full"),m||a.classList.contains("hidden")||setTimeout((()=>{const e=document.createElement("div");e.className="chatbot-message bot mb-2 p-2 sm:p-3 rounded-lg text-white text-sm sm:text-base",e.textContent="Bem-vindo(a)! Estou aqui para ajudar com suas dúvidas. Como posso começar?",d.appendChild(e),d.scrollTop=d.scrollHeight,sessionStorage.setItem("chatbotWelcomed","true"),m=!0}),1e3)})),s.addEventListener("click",(()=>{a.classList.add("hidden"),a.classList.add("translate-x-full")})),i.addEventListener("submit",(e=>{if(e.preventDefault(),!r.value.trim())return;const t=document.createElement("div");t.className="chatbot-message user mb-2 p-2 sm:p-3 rounded-lg text-white text-sm sm:text-base",t.textContent=r.value,d.appendChild(t);const n=document.createElement("div");n.className="chatbot-typing mb-2",n.textContent="Digitando...",d.appendChild(n),d.scrollTop=d.scrollHeight,setTimeout((()=>{d.removeChild(n);const e=document.createElement("div");e.className="chatbot-message bot mb-2 p-2 sm:p-3 rounded-lg text-white text-sm sm:text-base",e.textContent="Entendido! Como posso ajudar mais?",d.appendChild(e),d.scrollTop=d.scrollHeight}),1500),r.value="",d.scrollTop=d.scrollHeight})),l.addEventListener("change",(e=>{const t=e.target.files[0];if(!t)return;if(!["application/pdf","image/png","image/jpeg"].includes(t.type))return c.textContent="Apenas PDF, PNG ou JPG são permitidos.",void c.classList.remove("hidden");if(t.size>5242880)return c.textContent="O arquivo deve ter no máximo 5MB.",void c.classList.remove("hidden");c.classList.add("hidden");const n=document.createElement("div");n.className="chatbot-message user mb-2 p-2 sm:p-3 rounded-lg text-white text-sm sm:text-base",n.innerHTML=`\n            <a href="#" class="underline">${t.name}</a>\n            ${t.type.startsWith("image/")?`<img src="${URL.createObjectURL(t)}" class="mt-2 max-w-full rounded-lg" alt="Uploaded image" />`:""}\n        `,d.appendChild(n);const o=document.createElement("div");o.className="chatbot-typing mb-2",o.textContent="Digitando...",d.appendChild(o),d.scrollTop=d.scrollHeight,setTimeout((()=>{d.removeChild(o);const e=document.createElement("div");e.className="chatbot-message bot mb-2 p-2 sm:p-3 rounded-lg text-white text-sm sm:text-base",e.textContent=`Recebi o arquivo ${t.name}. Como posso ajudá-lo com isso?`,d.appendChild(e),d.scrollTop=d.scrollHeight}),1500),l.value="",d.scrollTop=d.scrollHeight})),document.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(t=>{const n=document.createElement("span");n.style.position="absolute",n.style.background="rgba(219, 39, 119, 0.3)",n.style.borderRadius="50%",n.style.transform="translate(-50%, -50%)",n.style.animation="ripple 0.6s linear";const o=e.getBoundingClientRect();n.style.width=n.style.height=`${Math.max(o.width,o.height)}px`,n.style.left=t.clientX-o.left+"px",n.style.top=t.clientY-o.top+"px",e.appendChild(n),setTimeout((()=>n.remove()),600)}))}))}));